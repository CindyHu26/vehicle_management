<div 
  class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50"
  hx-on:click="if (event.target === this) this.remove()"
  
  hx-get="/parking-lot-list"
  hx-trigger="refreshParkingLotList from:body"
  hx-target="this"
  hx-swap="innerHTML"
>
  <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-lg relative max-h-[90vh] overflow-y-auto">
    
    <div class="absolute top-0 right-0 pt-4 pr-4">
      <button 
        type="button"
        class="text-gray-400 hover:text-gray-600 transition duration-150 ease-in-out"
        onclick="this.closest('.fixed').remove()"
        aria-label="Close"
      >
        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <h2 class="text-2xl font-semibold mb-4">
      管理停車場
    </h2>

    <div class="overflow-x-auto bg-white border border-gray-200 rounded-lg">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">停車場名稱</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">車位數</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% if not lots %}
            <tr>
              <td colspan="3" class="px-4 py-4 text-center text-sm text-gray-500">
                尚無停車場
              </td>
            </tr>
          {% endif %} 
          
          {% for lot in lots %}
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-4 whitespace-nowrap text-left text-sm font-medium">
              <button
                class="text-blue-600 hover:text-blue-900"
                hx-get="/parking-lot/{{ lot.id }}/edit"
                hx-target="#modal-container"
                hx-swap="beforeend"
              >
                編輯
              </button>
              <button
                class="text-red-600 hover:text-red-900 ml-4"
                hx-delete="/parking-lot/{{ lot.id }}/delete"
                hx-target="closest tr"
                hx-swap="outerHTML"
                hx-confirm="確定要刪除「{{ lot.name }}」嗎？(必須先清空此停車場下的所有車位)"
              >
                刪除
              </button>
            </td>
            <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-800">
              {{ lot.name }}
            </td>
            <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-700">
              {{ lot.spots | length }}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="mt-6 flex justify-end space-x-3">
      <button type="button" 
              class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300"
              hx-on:click="this.closest('.fixed').remove()"
      >
        關閉
      </button>
    </div>
    
  </div>
</div>