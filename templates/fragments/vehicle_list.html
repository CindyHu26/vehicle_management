<div class="bg-white shadow-md rounded-lg overflow-hidden">
  <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
          <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ“ä½œ</th>
              
              <th 
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                hx-get="/vehicles-list"
                hx-vals='{
                  "filter_user_id": "{{ query_params.get("filter_user_id", "") }}",
                  "filter_vehicle_type": "{{ query_params.get("filter_vehicle_type", "") }}",
                  "filter_status": "{{ query_params.get("filter_status", "") }}",
                  "sort_by": "plate_no",
                  "sort_order": "{% if current_sort_by == "plate_no" and current_sort_order == "asc" %}desc{% else %}asc{% endif %}"
                }'
                hx-target="#vehicle-list-container" hx-swap="innerHTML"
              >
                è»Šç‰Œè™Ÿç¢¼
                {% if current_sort_by == "plate_no" %}{{ "ğŸ”¼" if current_sort_order == "asc" else "ğŸ”½" }}{% endif %}
              </th>
              
              <th 
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                hx-get="/vehicles-list"
                hx-vals='{
                  "filter_user_id": "{{ query_params.get("filter_user_id", "") }}",
                  "filter_vehicle_type": "{{ query_params.get("filter_vehicle_type", "") }}",
                  "filter_status": "{{ query_params.get("filter_status", "") }}",
                  "sort_by": "user_id",
                  "sort_order": "{% if current_sort_by == "user_id" and current_sort_order == "asc" %}desc{% else %}asc{% endif %}"
                }'
                hx-target="#vehicle-list-container" hx-swap="innerHTML"
              >
                ä¸»è¦ä½¿ç”¨äºº
                {% if current_sort_by == "user_id" %}{{ "ğŸ”¼" if current_sort_order == "asc" else "ğŸ”½" }}{% endif %}
              </th>

              <th 
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                hx-get="/vehicles-list"
                hx-vals='{
                  "filter_user_id": "{{ query_params.get("filter_user_id", "") }}",
                  "filter_vehicle_type": "{{ query_params.get("filter_vehicle_type", "") }}",
                  "filter_status": "{{ query_params.get("filter_status", "") }}",
                  "sort_by": "vehicle_type",
                  "sort_order": "{% if current_sort_by == "vehicle_type" and current_sort_order == "asc" %}desc{% else %}asc{% endif %}"
                }'
                hx-target="#vehicle-list-container" hx-swap="innerHTML"
              >
                è»Šè¼›é¡å‹
                {% if current_sort_by == "vehicle_type" %}{{ "ğŸ”¼" if current_sort_order == "asc" else "ğŸ”½" }}{% endif %}
              </th>
              
              <th 
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                hx-get="/vehicles-list"
                hx-vals='{
                  "filter_user_id": "{{ query_params.get("filter_user_id", "") }}",
                  "filter_vehicle_type": "{{ query_params.get("filter_vehicle_type", "") }}",
                  "filter_status": "{{ query_params.get("filter_status", "") }}",
                  "sort_by": "status",
                  "sort_order": "{% if current_sort_by == "status" and current_sort_order == "asc" %}desc{% else %}asc{% endif %}"
                }'
                hx-target="#vehicle-list-container" hx-swap="innerHTML"
              >
                ç‹€æ…‹
                {% if current_sort_by == "status" %}{{ "ğŸ”¼" if current_sort_order == "asc" else "ğŸ”½" }}{% endif %}
              </th>
              
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å‹è™Ÿ</th>
              
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ä¿é¤Šé€±æœŸ</th>
              
              <th 
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer"
                hx-get="/vehicles-list"
                hx-vals='{
                  "filter_user_id": "{{ query_params.get("filter_user_id", "") }}",
                  "filter_vehicle_type": "{{ query_params.get("filter_vehicle_type", "") }}",
                  "filter_status": "{{ query_params.get("filter_status", "") }}",
                  "sort_by": "manufacture_date",
                  "sort_order": "{% if current_sort_by == "manufacture_date" and current_sort_order == "asc" %}desc{% else %}asc{% endif %}"
                }'
                hx-target="#vehicle-list-container" hx-swap="innerHTML"
              >
                å‡ºå» æ—¥æœŸ
                {% if current_sort_by == "manufacture_date" %}{{ "ğŸ”¼" if current_sort_order == "asc" else "ğŸ”½" }}{% endif %}
              </th>

              </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200" id="vehicle-table-body">
          
          {% for vehicle in vehicles %}
            <tr 
                class="hover:bg-gray-100 cursor-pointer"
                hx-get="/vehicle/{{ vehicle.id }}"
                hx-target="#main-content"
                hx-swap="innerHTML"
                hx-trigger="click"
            >
              <td class="px-6 py-4 whitespace-nowrap text-left text-sm font-medium">
                  <button 
                    class="text-blue-600 hover:text-blue-900"
                    hx-get="/vehicle/{{ vehicle.id }}/edit"
                    hx-target="#modal-container"
                    hx-swap="beforeend"
                    hx-on:click.stop
                  >
                    ç·¨è¼¯
                  </button>
                  
                  <button 
                    class="text-red-600 hover:text-red-900 ml-4"
                    hx-delete="/vehicle/{{ vehicle.id }}/delete"
                    hx-target="closest tr"  
                    hx-swap="outerHTML"     
                    hx-confirm="ç¢ºå®šè¦åˆªé™¤è»Šç‰Œ {{ vehicle.plate_no }} å—ï¼Ÿ"
                    hx-on:click.stop
                  >
                    åˆªé™¤
                  </button>
              </td>

              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ vehicle.plate_no }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  {{ vehicle.user.name if vehicle.user else '' }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                  {{ vehicle_type_map.get(vehicle.vehicle_type.value, vehicle.vehicle_type.value) }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                  {% if vehicle.status.value == 'active' %}
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">å•Ÿç”¨ä¸­</span>
                  {% elif vehicle.status.value == 'retired' %}
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">å·²å ±å»¢</span>
                  {% else %}
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">{{ vehicle.status.value }}</span>
                  {% endif %}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">{{ vehicle.model or '' }}</td>
              
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-right">
                {{ "{:,.0f} km".format(vehicle.maintenance_interval) if vehicle.maintenance_interval else '' }}
              </td>
              
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                {{ vehicle.manufacture_date.strftime('%Y-%m-%d') if vehicle.manufacture_date else '' }}
              </td>

              </tr>
          {% endfor %}
      </tbody>
  </table>
</div>